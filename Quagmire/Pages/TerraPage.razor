@page "/terra"

@using Terra
@inject IPopulationReporter populationReporter
@inject IWorldAlterer worldAlterer
@inject IWorldReporter worldReporter
@inject IPartitionAlterer partitionAlterer

<pre>@WorldReport</pre>

<button class="btn btn-primary" @onclick="Report">Report</button>

@code {
    public string WorldReport { get; set; }

    private Task Report()
    {
        var seed = 10;

        var agolora = Terra.Agolora.AgoloraWorld.Agolora;

        agolora.Continents = partitionAlterer.Randomize(agolora.Continents, 0, 30, 10, seed);

        worldAlterer.Alter(agolora);

        var report = populationReporter.Report(agolora.Population, Terra.Agolora.Challenges.AgoloraChallenges);

        var worldReport = worldReporter.Report(agolora);

        WorldReport = report + Environment.NewLine + worldReport;

        return Task.CompletedTask;
    }
}
